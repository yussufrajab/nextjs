   ▲ Next.js 15.2.3
   - Local:        http://localhost:3003
   - Network:      http://10.0.202.33:3003

 ✓ Starting...
 ✓ Ready in 580ms
MinIO credentials check: {
  accessKey: 'csmsapp',
  secretKey: '[HARDCODED]',
  NODE_ENV: 'production'
}
Login attempt for username: skhamis
Login successful for user: skhamis
Service Extension API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all service extension data across institutions
Termination API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all termination data across institutions
Resignation API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all resignation data across institutions
Retirement API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all retirement data across institutions
Cadre Change API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all cadre change data across institutions
Found 29 cadre change requests
Promotions API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all promotion data across institutions
Found 38 promotion requests
LWOP API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all LWOP data across institutions
Confirmations API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all confirmation data across institutions
Employees API called with params: {
  userRole: null,
  userInstitutionId: null,
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
No user role provided - showing ALL employees (default behavior)
Found 174 employees out of 174 total
Resignation API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all resignation data across institutions
Resignation API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Login attempt for username: kmnyonge
Login successful for user: kmnyonge
=== TEST API CALLED ===
=== Dashboard metrics API called ===
Total employees: 174
Pending confirmations: 0
Pending promotions: 0
Employees on LWOP: 2
Pending terminations: 0
Open complaints: 16
Pending cadre changes: 25
Pending retirements: 18
Pending resignations: 17
Pending service extensions: 13
=== Dashboard metrics calculated === {
  totalEmployees: 174,
  pendingConfirmations: 12,
  pendingPromotions: 8,
  employeesOnLwop: 2,
  pendingTerminations: 3,
  openComplaints: 16,
  pendingCadreChanges: 25,
  pendingRetirements: 18,
  pendingResignations: 17,
  pendingServiceExtensions: 13
}
=== Recent activities count === 5
=== Final API response === {
  "success": true,
  "data": {
    "stats": {
      "totalEmployees": 174,
      "pendingConfirmations": 12,
      "pendingPromotions": 8,
      "employeesOnLwop": 2,
      "pendingTerminations": 3,
      "openComplaints": 16,
      "pendingCadreChanges": 25,
      "pendingRetirements": 18,
      "pendingResignations": 17,
      "pendingServiceExtensions": 13
    },
    "recentActivities": [
      {
        "id": "cmdztvkh700012bl1x6btjdbq",
        "type": "Change of Cadre",
        "employee": "Mariam Hassan Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:31:18.379Z",
        "href": "/dashboard/cadre-change"
      },
      {
        "id": "cmdzmynq400092bgq56pf1kpq",
        "type": "LWOP",
        "employee": "Juma Khamis Makame",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T07:35:26.120Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzm1aly00072bgqn8l1s75j",
        "type": "Confirmation",
        "employee": "Hamis Mohammed Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:51:48.598Z",
        "href": "/dashboard/confirmation"
      },
      {
        "id": "cmdzlq44100052bgq2q8o7z46",
        "type": "Promotion",
        "employee": "Mwalimu Hassan Khamis",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:43:06.961Z",
        "href": "/dashboard/promotion"
      },
      {
        "id": "cmdzlpilt00032bgqs9fn8ami",
        "type": "Promotion",
        "employee": "Mwalimu Hassan Khamis",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:42:39.090Z",
        "href": "/dashboard/promotion"
      }
    ]
  }
}
Termination API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Service Extension API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Retirement API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Cadre Change API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Found 23 cadre change requests
Promotions API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Found 29 promotion requests
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Confirmations API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 30 employees out of 30 total
Login attempt for username: kmnyonge
Login successful for user: kmnyonge
Service Extension API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Login attempt for username: skhamis
Login successful for user: skhamis
=== TEST API CALLED ===
=== Dashboard metrics API called ===
Total employees: 174
Pending confirmations: 0
Pending promotions: 0
Employees on LWOP: 2
Pending terminations: 0
Open complaints: 16
Pending cadre changes: 25
Pending retirements: 18
Pending resignations: 17
Pending service extensions: 13
=== Dashboard metrics calculated === {
  totalEmployees: 174,
  pendingConfirmations: 12,
  pendingPromotions: 8,
  employeesOnLwop: 2,
  pendingTerminations: 3,
  openComplaints: 16,
  pendingCadreChanges: 25,
  pendingRetirements: 18,
  pendingResignations: 17,
  pendingServiceExtensions: 13
}
=== Recent activities count === 5
=== Final API response === {
  "success": true,
  "data": {
    "stats": {
      "totalEmployees": 174,
      "pendingConfirmations": 12,
      "pendingPromotions": 8,
      "employeesOnLwop": 2,
      "pendingTerminations": 3,
      "openComplaints": 16,
      "pendingCadreChanges": 25,
      "pendingRetirements": 18,
      "pendingResignations": 17,
      "pendingServiceExtensions": 13
    },
    "recentActivities": [
      {
        "id": "cmdztvkh700012bl1x6btjdbq",
        "type": "Change of Cadre",
        "employee": "Mariam Hassan Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:31:18.379Z",
        "href": "/dashboard/cadre-change"
      },
      {
        "id": "cmdzmynq400092bgq56pf1kpq",
        "type": "LWOP",
        "employee": "Juma Khamis Makame",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T07:35:26.120Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzm1aly00072bgqn8l1s75j",
        "type": "Confirmation",
        "employee": "Hamis Mohammed Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:51:48.598Z",
        "href": "/dashboard/confirmation"
      },
      {
        "id": "cmdzlq44100052bgq2q8o7z46",
        "type": "Promotion",
        "employee": "Mwalimu Hassan Khamis",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:43:06.961Z",
        "href": "/dashboard/promotion"
      },
      {
        "id": "cmdzlpilt00032bgqs9fn8ami",
        "type": "Promotion",
        "employee": "Mwalimu Hassan Khamis",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:42:39.090Z",
        "href": "/dashboard/promotion"
      }
    ]
  }
}
Confirmations API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 30 employees out of 30 total
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Preview API - Object key segments: [ 'lwop/letters/1754465721056_shfu17_mfano__1_.pdf' ]
Preview API - Reconstructed object key: lwop/letters/1754465721056_shfu17_mfano__1_.pdf
Download API - Object key segments: [ 'lwop/letters/1754465721056_shfu17_mfano__1_.pdf' ]
Download API - Reconstructed object key: lwop/letters/1754465721056_shfu17_mfano__1_.pdf
Service Extension API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employee search API called with: { zanId: '1905930805', q: null }
Found 1 employees matching search criteria
Service Extension API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Creating LWOP request: {
  employeeId: 'ofisi_emp_022',
  submittedById: 'cmd06nnbn000le67wtg41s3su',
  documents: [
    'lwop/letters/1754477423151_on5jj1_ya_kustaafu_kwa_hiar....pdf',
    'lwop/consents/1754477429715_97bli2_Profile_Analysis.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  startDate: '2025-08-07',
  endDate: '2026-02-21',
  duration: '7 months',
  reason: 'dada'
}
Employee search API called with: { zanId: '1905820214', q: null }
Found 1 employees matching search criteria
Employee search API called with: { zanId: '1905930805', q: null }
Found 1 employees matching search criteria
Employee search API called with: { zanId: '1905930616', q: null }
Found 1 employees matching search criteria
Service Extension API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Creating LWOP request: {
  employeeId: 'ofisi_emp_014',
  submittedById: 'cmd06nnbn000le67wtg41s3su',
  documents: [
    'lwop/letters/1754477507528_m1xo7g_mfano__1_.pdf',
    'lwop/consents/1754477510641_3zvq2e_kuacha_kazi_report__1_.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  startDate: '2025-08-07',
  endDate: '2026-01-30',
  duration: '6 months',
  reason: 'ddddd'
}
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employee search API called with: { zanId: '1905950211', q: null }
Found 1 employees matching search criteria
Employee search API called with: { zanId: '1905850030', q: null }
Found 1 employees matching search criteria
Creating LWOP request: {
  employeeId: 'emp_003',
  submittedById: 'cmd06nnbn000le67wtg41s3su',
  documents: [
    'lwop/letters/1754477548677_2lnh0a_Employee_Profile_Analysis.pdf',
    'lwop/consents/1754477551363_dx4lsq_mfano.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  startDate: '2025-08-08',
  endDate: '2026-01-03',
  duration: '5 months',
  reason: 'sawa'
}
Created LWOP request: cmdzumwsv00012bfh4hvid031
Institutions API called
Found 42 institutions
Login attempt for username: kmnyonge
Login successful for user: kmnyonge
=== TEST API CALLED ===
=== Dashboard metrics API called ===
Total employees: 174
Pending confirmations: 0
Pending promotions: 0
Employees on LWOP: 2
Pending terminations: 0
Open complaints: 16
Pending cadre changes: 25
Pending retirements: 18
Pending resignations: 17
Pending service extensions: 13
=== Dashboard metrics calculated === {
  totalEmployees: 174,
  pendingConfirmations: 12,
  pendingPromotions: 8,
  employeesOnLwop: 2,
  pendingTerminations: 3,
  openComplaints: 16,
  pendingCadreChanges: 25,
  pendingRetirements: 18,
  pendingResignations: 17,
  pendingServiceExtensions: 13
}
=== Recent activities count === 5
=== Final API response === {
  "success": true,
  "data": {
    "stats": {
      "totalEmployees": 174,
      "pendingConfirmations": 12,
      "pendingPromotions": 8,
      "employeesOnLwop": 2,
      "pendingTerminations": 3,
      "openComplaints": 16,
      "pendingCadreChanges": 25,
      "pendingRetirements": 18,
      "pendingResignations": 17,
      "pendingServiceExtensions": 13
    },
    "recentActivities": [
      {
        "id": "cmdzumwsv00012bfh4hvid031",
        "type": "LWOP",
        "employee": "Said Juma Nassor",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:52:34.063Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdztvkh700012bl1x6btjdbq",
        "type": "Change of Cadre",
        "employee": "Mariam Hassan Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:31:18.379Z",
        "href": "/dashboard/cadre-change"
      },
      {
        "id": "cmdzmynq400092bgq56pf1kpq",
        "type": "LWOP",
        "employee": "Juma Khamis Makame",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T07:35:26.120Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzm1aly00072bgqn8l1s75j",
        "type": "Confirmation",
        "employee": "Hamis Mohammed Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:51:48.598Z",
        "href": "/dashboard/confirmation"
      },
      {
        "id": "cmdzlq44100052bgq2q8o7z46",
        "type": "Promotion",
        "employee": "Mwalimu Hassan Khamis",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:43:06.961Z",
        "href": "/dashboard/promotion"
      }
    ]
  }
}
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Login attempt for username: kmnyonge
Login successful for user: kmnyonge
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 30 employees out of 30 total
Employee search API called with: { zanId: '1905910128', q: null }
Found 1 employees matching search criteria
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employee search API called with: { zanId: '1905810505', q: null }
Found 1 employees matching search criteria
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 30 employees out of 30 total
Confirmations API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employee search API called with: { zanId: '1908920060', q: null }
Found 1 employees matching search criteria
Creating confirmation request: {
  employeeId: 'emp_006',
  submittedById: 'cmd06nnbn000le67wtg41s3su',
  documents: [
    'confirmation/evaluation-forms/1754477830204_gv3bt5_HAMAD_MUHAMAD_MUSSA-Dissertation-21-09-2021.pdf',
    'confirmation/letters/1754477834854_8rb8xn_SAID_SAID_New_-_Copy.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  reviewStage: 'initial'
}
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 30 employees out of 30 total
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: 'z',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 7 employees out of 7 total
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x',
  q: 'zeina',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 1 employees out of 1 total
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Confirmations API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Employee search API called with: { zanId: '1908920060', q: null }
Found 1 employees matching search criteria
Creating confirmation request: {
  employeeId: 'emp_006',
  submittedById: 'cmd06nnbn000le67wtg41s3su',
  documents: [
    'confirmation/evaluation-forms/1754477898848_2fhwd7_Employee_Profile_Analysis.pdf',
    'confirmation/letters/1754477902486_4j9woc_sababu.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  reviewStage: 'initial'
}
Confirmations API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Promotions API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Found 29 promotion requests
Employee search API called with: { zanId: '1908920060', q: null }
Found 1 employees matching search criteria
Creating confirmation request: {
  employeeId: 'emp_006',
  submittedById: 'cmd06nnbn000le67wtg41s3su',
  documents: [
    'confirmation/evaluation-forms/1754477990800_4sd1yn_SAID_SAID_New_-_Copy.pdf',
    'confirmation/letters/1754477996405_oz9lmg_SAID_SAID_New_-_Copy__4_.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  reviewStage: 'initial'
}
Login attempt for username: mariamj
Login successful for user: mariamj
=== TEST API CALLED ===
=== Dashboard metrics API called ===
Total employees: 174
Pending confirmations: 0
Pending promotions: 0
Employees on LWOP: 2
Pending terminations: 0
Open complaints: 16
Pending cadre changes: 25
Pending retirements: 18
Pending resignations: 17
Pending service extensions: 13
=== Dashboard metrics calculated === {
  totalEmployees: 174,
  pendingConfirmations: 12,
  pendingPromotions: 8,
  employeesOnLwop: 2,
  pendingTerminations: 3,
  openComplaints: 16,
  pendingCadreChanges: 25,
  pendingRetirements: 18,
  pendingResignations: 17,
  pendingServiceExtensions: 13
}
=== Recent activities count === 5
=== Final API response === {
  "success": true,
  "data": {
    "stats": {
      "totalEmployees": 174,
      "pendingConfirmations": 12,
      "pendingPromotions": 8,
      "employeesOnLwop": 2,
      "pendingTerminations": 3,
      "openComplaints": 16,
      "pendingCadreChanges": 25,
      "pendingRetirements": 18,
      "pendingResignations": 17,
      "pendingServiceExtensions": 13
    },
    "recentActivities": [
      {
        "id": "cmdzumwsv00012bfh4hvid031",
        "type": "LWOP",
        "employee": "Said Juma Nassor",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:52:34.063Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdztvkh700012bl1x6btjdbq",
        "type": "Change of Cadre",
        "employee": "Mariam Hassan Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:31:18.379Z",
        "href": "/dashboard/cadre-change"
      },
      {
        "id": "cmdzmynq400092bgq56pf1kpq",
        "type": "LWOP",
        "employee": "Juma Khamis Makame",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T07:35:26.120Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzm1aly00072bgqn8l1s75j",
        "type": "Confirmation",
        "employee": "Hamis Mohammed Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:51:48.598Z",
        "href": "/dashboard/confirmation"
      },
      {
        "id": "cmdzlq44100052bgq2q8o7z46",
        "type": "Promotion",
        "employee": "Mwalimu Hassan Khamis",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:43:06.961Z",
        "href": "/dashboard/promotion"
      }
    ]
  }
}
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 6 employees out of 6 total
LWOP API called with: {
  userId: 'cmd06nnbs000pe67woh62ey8r',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7'
}
Applying institution filter for role HRO with institutionId cmd06nn7u0003e67wa4hiyie7
Employee search API called with: { zanId: '1910900170', q: null }
Found 1 employees matching search criteria
Creating LWOP request: {
  employeeId: 'emp_017',
  submittedById: 'cmd06nnbs000pe67woh62ey8r',
  documents: [
    'lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf',
    'lwop/consents/1754478145398_krsu2m_SAID_SAID_New_-_Copy__4_.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  startDate: '2025-08-08',
  endDate: '2026-07-03',
  duration: '11 months',
  reason: 'jawabu'
}
Created LWOP request: cmdzuzn4d00032bfhjymbhe7o
LWOP API called with: {
  userId: 'cmd06nnbs000pe67woh62ey8r',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7'
}
Applying institution filter for role HRO with institutionId cmd06nn7u0003e67wa4hiyie7
Preview API - Object key segments: [ 'lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf' ]
Preview API - Reconstructed object key: lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf
Download API - Object key segments: [ 'lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf' ]
Download API - Reconstructed object key: lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf
Preview API - Object key segments: [ 'lwop/consents/1754478145398_krsu2m_SAID_SAID_New_-_Copy__4_.pdf' ]
Preview API - Reconstructed object key: lwop/consents/1754478145398_krsu2m_SAID_SAID_New_-_Copy__4_.pdf
Login attempt for username: fiddi
Login successful for user: fiddi
=== TEST API CALLED ===
=== Dashboard metrics API called ===
Total employees: 174
Pending confirmations: 0
Pending promotions: 0
Employees on LWOP: 2
Pending terminations: 0
Open complaints: 16
Pending cadre changes: 25
Pending retirements: 18
Pending resignations: 17
Pending service extensions: 13
=== Dashboard metrics calculated === {
  totalEmployees: 174,
  pendingConfirmations: 12,
  pendingPromotions: 8,
  employeesOnLwop: 2,
  pendingTerminations: 3,
  openComplaints: 16,
  pendingCadreChanges: 25,
  pendingRetirements: 18,
  pendingResignations: 17,
  pendingServiceExtensions: 13
}
=== Recent activities count === 5
=== Final API response === {
  "success": true,
  "data": {
    "stats": {
      "totalEmployees": 174,
      "pendingConfirmations": 12,
      "pendingPromotions": 8,
      "employeesOnLwop": 2,
      "pendingTerminations": 3,
      "openComplaints": 16,
      "pendingCadreChanges": 25,
      "pendingRetirements": 18,
      "pendingResignations": 17,
      "pendingServiceExtensions": 13
    },
    "recentActivities": [
      {
        "id": "cmdzuzn4d00032bfhjymbhe7o",
        "type": "LWOP",
        "employee": "Pharmacist Ahmed Ali",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T11:02:28.045Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzumwsv00012bfh4hvid031",
        "type": "LWOP",
        "employee": "Said Juma Nassor",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:52:34.063Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdztvkh700012bl1x6btjdbq",
        "type": "Change of Cadre",
        "employee": "Mariam Hassan Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:31:18.379Z",
        "href": "/dashboard/cadre-change"
      },
      {
        "id": "cmdzmynq400092bgq56pf1kpq",
        "type": "LWOP",
        "employee": "Juma Khamis Makame",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T07:35:26.120Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzm1aly00072bgqn8l1s75j",
        "type": "Confirmation",
        "employee": "Hamis Mohammed Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:51:48.598Z",
        "href": "/dashboard/confirmation"
      }
    ]
  }
}
LWOP API called with: {
  userId: 'cmd06nnbb000be67wwgil78yv',
  userRole: 'HRMO',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HRMO is a CSC role - showing all LWOP data across institutions
Preview API - Object key segments: [ 'lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf' ]
Preview API - Reconstructed object key: lwop/letters/1754478141939_tinkd3_SAID_SAID_New.pdf
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
LWOP API called with: {
  userId: 'cmd06nnbn000le67wtg41s3su',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7n0001e67w2h5rf86x'
}
Applying institution filter for role HRO with institutionId cmd06nn7n0001e67w2h5rf86x
Login attempt for username: skhamis
Login successful for user: skhamis
=== TEST API CALLED ===
=== Dashboard metrics API called ===
Total employees: 174
Pending confirmations: 0
Pending promotions: 0
Employees on LWOP: 2
Pending terminations: 0
Open complaints: 16
Pending cadre changes: 25
Pending retirements: 18
Pending resignations: 17
Pending service extensions: 13
=== Dashboard metrics calculated === {
  totalEmployees: 174,
  pendingConfirmations: 12,
  pendingPromotions: 8,
  employeesOnLwop: 2,
  pendingTerminations: 3,
  openComplaints: 16,
  pendingCadreChanges: 25,
  pendingRetirements: 18,
  pendingResignations: 17,
  pendingServiceExtensions: 13
}
=== Recent activities count === 5
=== Final API response === {
  "success": true,
  "data": {
    "stats": {
      "totalEmployees": 174,
      "pendingConfirmations": 12,
      "pendingPromotions": 8,
      "employeesOnLwop": 2,
      "pendingTerminations": 3,
      "openComplaints": 16,
      "pendingCadreChanges": 25,
      "pendingRetirements": 18,
      "pendingResignations": 17,
      "pendingServiceExtensions": 13
    },
    "recentActivities": [
      {
        "id": "cmdzuzn4d00032bfhjymbhe7o",
        "type": "LWOP",
        "employee": "Pharmacist Ahmed Ali",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T11:02:28.045Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzumwsv00012bfh4hvid031",
        "type": "LWOP",
        "employee": "Said Juma Nassor",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:52:34.063Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdztvkh700012bl1x6btjdbq",
        "type": "Change of Cadre",
        "employee": "Mariam Hassan Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T10:31:18.379Z",
        "href": "/dashboard/cadre-change"
      },
      {
        "id": "cmdzmynq400092bgq56pf1kpq",
        "type": "LWOP",
        "employee": "Juma Khamis Makame",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T07:35:26.120Z",
        "href": "/dashboard/lwop"
      },
      {
        "id": "cmdzm1aly00072bgqn8l1s75j",
        "type": "Confirmation",
        "employee": "Hamis Mohammed Juma",
        "status": "Pending HRMO/HHRMD Review",
        "updatedAt": "2025-08-06T06:51:48.598Z",
        "href": "/dashboard/confirmation"
      }
    ]
  }
}
LWOP API called with: {
  userId: 'cmd059ir10002e6d86l802ljc',
  userRole: 'HHRMD',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HHRMD is a CSC role - showing all LWOP data across institutions
Employees API called with params: {
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7',
  q: '',
  status: null,
  gender: null,
  page: 1,
  size: 1000
}
Applying institution filter for role: HRO
Found 6 employees out of 6 total
LWOP API called with: {
  userId: 'cmd06nnbs000pe67woh62ey8r',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7'
}
Applying institution filter for role HRO with institutionId cmd06nn7u0003e67wa4hiyie7
Employee search API called with: { zanId: '1907750140', q: null }
Found 1 employees matching search criteria
Creating LWOP request: {
  employeeId: 'emp_014',
  submittedById: 'cmd06nnbs000pe67woh62ey8r',
  documents: [
    'lwop/letters/1754478412047_w3nnl4_ya_kustaafu_kwa_hiar....pdf',
    'lwop/consents/1754478425971_wht7ty_mfano__1_.pdf'
  ],
  status: 'Pending HRMO/HHRMD Review',
  startDate: '2025-08-06',
  endDate: '2026-09-26',
  duration: '14 months',
  reason: 'siasa'
}
Created LWOP request: cmdzv5nqx00052bfht1rrvak3
LWOP API called with: {
  userId: 'cmd06nnbs000pe67woh62ey8r',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7'
}
Applying institution filter for role HRO with institutionId cmd06nn7u0003e67wa4hiyie7
LWOP API called with: {
  userId: 'cmd06nnbb000be67wwgil78yv',
  userRole: 'HRMO',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HRMO is a CSC role - showing all LWOP data across institutions
LWOP API called with: {
  userId: 'cmd06nnbb000be67wwgil78yv',
  userRole: 'HRMO',
  userInstitutionId: 'cmd059ion0000e6d85kexfukl'
}
Role HRMO is a CSC role - showing all LWOP data across institutions
LWOP API called with: {
  userId: 'cmd06nnbs000pe67woh62ey8r',
  userRole: 'HRO',
  userInstitutionId: 'cmd06nn7u0003e67wa4hiyie7'
}
Applying institution filter for role HRO with institutionId cmd06nn7u0003e67wa4hiyie7
